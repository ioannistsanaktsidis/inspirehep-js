/*
 * This file is part of INSPIRE.
 * Copyright (C) 2016 CERN.
 *
 * INSPIRE is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * INSPIRE is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with INSPIRE; if not, write to the Free Software Foundation, Inc.,
 * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
 *
 * In applying this license, CERN does not
 * waive the privileges and immunities granted to it by virtue of its status
 * as an Intergovernmental Organization or submit itself to any jurisdiction.
 */
!function(t){t.module("inspirehep",["citemodal","export","checkbox"])}(angular),function(t){t.module("checkbox",["checkbox.controllers","checkbox.services"])}(angular),function(t){t.module("citemodal",["ngclipboard","ui.bootstrap","citemodal.directives","citemodal.services","citemodal.controllers"]),t.module("citemodal").config(["$uibTooltipProvider",function(t){t.setTriggers({click:"mouseleave"})}])}(angular),function(t){t.module("export",["ngclipboard","ngSanitize","ui.bootstrap","export.directives","export.controllers"]),t.module("export").config(["$uibTooltipProvider",function(t){t.setTriggers({click:"mouseleave"})}])}(angular),function(t){function e(e,o){function n(t){o.addIdsToExport(t),e.$parent.vm.enable_cite_button=o.getIdsToExport().length>0}function r(t){return-1!=o.getIdsToExport().indexOf(t)}function c(){t.forEach(e.$parent.vm.invenioSearchResults.hits.hits,function(t){o.addIdsToExport(t.id)}),e.$parent.vm.enable_cite_button=o.getIdsToExport().length>0}e.loadIdsToExport=n,e.getAllIdsToExport=c,e.$parent.vm.enable_cite_button=!1,e.isChecked=r}e.$inject=["$scope","exportRecords"],t.module("checkbox.controllers",[]).controller("checkboxCtrl",e)}(angular),function(t){function e(){function t(t){var e=o.indexOf(t);e>-1?o.splice(e,1):o.push(t)}function e(){return o}var o=[],n={addIdsToExport:t,getIdsToExport:e};return n}t.module("checkbox.services",[]).service("exportRecords",e)}(angular),function(t){function e(t,e,o,n){function r(){u.loadFormat()}function c(){e.close()}function a(t){u.exportFormat=t}function i(t,e){t!==e&&u.loadFormat()}function l(){function t(t){u.exportContent=t.data}function e(){console.log("Error request")}function n(){u.loading=!1}u.loading=!0,o.getFormat(u.exportFormat,u.recid).then(t,e).finally(n)}var u=this;u.formats=["BibTex","LaTex(EU)","LaTex(US)"],u.recid=n,u.exportContent=null,u.loading=!1,u.exportFormat="BibTex",u.changeFormat=a,u.closeModal=c,u.loadFormat=l,r(),t.$watch("vm.exportFormat",i)}e.$inject=["$scope","$uibModalInstance","exportAPI","recid"],t.module("citemodal.controllers",[]).controller("modalInstanceCtrl",e)}(angular),function(t){function e(t){function e(e,o,n){e.openModal=function(e){t.open({animation:!0,templateUrl:n.bodyTemplate,size:e,controller:"modalInstanceCtrl",controllerAs:"vm",resolve:{recid:function(){return n.recid}}})}}function o(t,e){return e.buttonTemplate}return{templateUrl:o,restrict:"E",scope:!1,link:e}}e.$inject=["$uibModal"],t.module("citemodal.directives",[]).directive("inspireCiteModal",e)}(angular),function(t){function e(t){function e(e,o){var n={},r="/api/literature/"+o;switch(e){case"BibTex":n.headers={Accept:"application/x-bibtex"};break;case"LaTex(EU)":n.headers={Accept:"application/x-latexeu"};break;case"LaTex(US)":n.headers={Accept:"application/x-latexus"};break;case"CV format (LaTex)":n.headers={Accept:"application/x-cvformatlatex"};break;case"CV format (html)":n.headers={Accept:"application/x-cvformathtml"};break;case"CV format (text)":n.headers={Accept:"application/x-cvformattext"}}return t.get(r,n)}var o={getFormat:e};return o}e.$inject=["$http"],t.module("citemodal.services",[]).service("exportAPI",e)}(angular),function(t){function e(e,o,n,r){function c(){d.loadFormat()}function a(){o.close()}function i(t){d.exportAllContent="",d.exportFormat=t}function l(t,e){t!==e&&d.loadFormat()}function u(){function e(t){d.exportAllContent+=t.data+"\n"}function o(){console.log("Error request")}function c(){d.loading=!1}d.loading=!0,d.recidsToExport=r.getIdsToExport(),t.forEach(d.recidsToExport,function(t){n.getFormat(d.exportFormat,t).then(e,o).finally(c)})}var d=this;d.formats=["BibTex","LaTex(EU)","LaTex(US)","CV format (LaTex)","CV format (html)","CV format (text)"],d.recidsToExport=[],d.exportAllContent="",d.loading=!1,d.exportFormat="BibTex",d.changeFormat=i,d.closeModal=a,d.loadFormat=u,c(),e.$watch("vm.exportFormat",l)}e.$inject=["$scope","$uibModalInstance","exportAPI","exportRecords"],t.module("export.controllers",[]).controller("exportModalInstanceCtrl",e)}(angular),function(t){function e(t){function e(e,o,n){e.openModal=function(o){if(e.vm.enable_cite_button){t.open({animation:!0,templateUrl:n.bodyTemplate,size:o,controller:"exportModalInstanceCtrl",controllerAs:"vm",resolve:{recid:function(){return n.recid}}})}}}function o(t,e){return e.buttonTemplate}return{templateUrl:o,restrict:"E",scope:!1,link:e}}e.$inject=["$uibModal"],t.module("export.directives",[]).directive("inspireExportModal",e)}(angular);